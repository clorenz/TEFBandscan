<div id="status" th:fragment="status(time, freq, pi, piErrors, ps, psWithErrors, rdserrors, signal, avgSignal, snr, avgSnr, cci, avgCci, averageOffset, logged)">
    <div style="font-size: xxx-large; font-family: monospace;">
    <th:block th:if="${logged}">
        <span id="freq" th:text="${freq}" style="background-color: lightgreen;">87.5 MHz</span> &nbsp;
    </th:block>
    <th:block th:unless="${logged}">
        <span id="freq" th:text="${freq}">87.5 MHz</span> &nbsp;
    </th:block>
        <span id="pi" th:if="${pi != null}" th:text="${pi}" style="background-color: lightgrey"></span> &nbsp;
        <span id="pi" th:if="${pi == null}" style="background-color: red">&nbsp;&nbsp;&nbsp;&nbsp;</span> &nbsp;
        <span id="ps" th:if="${psWithErrors != null}" th:each="i: ${#numbers.sequence(0,7)}"><span th:text="${psWithErrors.getCharAtPosition(i)}" th:style="${psWithErrors.getCssColorAtPosition(i)}"/></span>&nbsp;
    </div>
    <div style="font-size: large;">
        RDS Errors: <th:block th:if="${rdserrors != null}"><span id="rdserrors" th:text="${rdserrors + '%'}"></span></th:block><th:block th:if="${rdserrors == null}">-</th:block><br/>
        Signal strength: <span id="signal" th:text="${signal + 'dBµV'}"></span>&nbsp;<span th:if="${avgSignal != null}" id="avgSignal" th:text="${'(avg: ' + avgSignal + 'dBµV)'}" th:style="${validSignalStrength ? 'background-color:lightgreen;' : 'background-color:red;'}"></span><br/>
        CCI: <span id="cci" th:text="${cci + '%'}"></span>&nbsp;<span th:if="${avgCci != null}" id="avgCci" th:text="${'(avg: ' + avgCci + '%)'}" th:style="${validCci ? 'background-color:lightgreen;' : 'background-color:red;'}"></span><br/>
        S/N ratio: <span id="snr" th:text="${snr + 'dB'}"></span>&nbsp;<span th:if="${avgSnr != null}" id="avgSnr" th:text="${'(avg: ' + avgSnr + 'dB)'}" th:style="${validSnr ? 'background-color:lightgreen;' : 'background-color:red;'}"></span><br/>
        Average offset: <span id="offset" th:text="${averageOffset + 'kHz'}" th:style="${averageOffset <= 25 ? 'background-color:lightgreen;' : 'background-color:red;'}"></span><br/>
    </div>
</div>